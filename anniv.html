<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Anniversary, Cintaku ❤️</title>
    
    <!-- Favicon -->
    <link rel="icon" href="/img/favicon.ico" type="image/x-icon">

    <!-- Google Fonts: Playfair Display for headings, Montserrat for body text -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" xintegrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        :root {
            --primary-color: #881337;   /* Red Velvet */
            --secondary-color: #f9a8d4; /* Soft Pink */
            --background-color: #fff1f2;/* Lightest Pink/Rose */
            --text-color: #44403c;      /* Dark Gray */
            --card-bg: #ffffff;
            --heading-font: 'Playfair Display', serif;
            --body-font: 'Montserrat', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
            font-family: var(--body-font);
            background-color: var(--background-color);
            color: var(--text-color);
            overflow-x: hidden;
            line-height: 1.7;
        }
        
        h1, h2, h3, h4, h5, h6 {
             font-family: var(--heading-font);
             color: var(--primary-color);
             font-weight: 700;
        }

        .container { max-width: 1100px; margin: 0 auto; padding: 3rem 1rem; }

        /* --- Screens: Preloader & Time-Lock --- */
        #preloader, #time-lock-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--background-color); display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 9999;
            transition: opacity 1.5s ease, visibility 1.5s ease;
            text-align: center; padding: 1rem;
        }
        #preloader.loaded, #time-lock-screen.hidden { 
            opacity: 0; visibility: hidden; pointer-events: none; 
        }
        .preloader-content h1 { font-size: clamp(3rem, 15vw, 6rem); }
        #enter-btn, #peek-btn {
            background: linear-gradient(145deg, var(--secondary-color), var(--primary-color));
            color: white; font-family: var(--body-font); font-size: 1.2rem; font-weight: 600;
            padding: 1rem 3rem; border: none; border-radius: 50px; cursor: pointer;
            margin-top: 2rem; transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(136, 19, 55, 0.4);
        }
        #enter-btn { animation: pulse 2s infinite 2s; }
        #peek-btn { font-size: 1rem; padding: 0.8rem 2.5rem; }
        #enter-btn:hover, #peek-btn:hover { transform: scale(1.05); }

        /* --- Main Content Wrapper --- */
        #main-content { opacity: 0; visibility: hidden; transition: opacity 1.5s ease; }
        #main-content.visible { opacity: 1; visibility: visible; }

        /* --- Animations --- */
        .reveal { position: relative; transform: translateY(100px); opacity: 0; transition: 1s all ease; }
        .reveal.active { transform: translateY(0); opacity: 1; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes heartBeat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }


        /* --- Hero Section with Falling Hearts --- */
        .hero {
            position: relative; display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center;
            min-height: 100vh;
            background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.5)), url('/img/bg-atas.jpg') no-repeat center center/cover;
            color: white; padding: 1rem; overflow: hidden;
        }
        .hero-content { background-color: rgba(0,0,0,0.55); padding: 2rem 1.5rem; border-radius: 20px; z-index: 2; }
        .hero h1 { font-size: clamp(3rem, 15vw, 6rem); margin-bottom: 0.5rem; color: white; }
        .hero h2 { font-size: clamp(1.5rem, 7vw, 2.5rem); font-weight: 400; margin-bottom: 1rem; font-family: var(--body-font); color: white; }
        .hero p { font-size: clamp(1rem, 4vw, 1.2rem); font-weight: 300; }
        .heart-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .heart-container .heart { position: absolute; color: rgba(255, 255, 255, 0.5); font-size: 1.5rem; animation: fall linear infinite; }
        @keyframes fall { to { transform: translateY(105vh) rotate(360deg); } }

        /* --- Countdown Section --- */
        .countdown-section {
            background-color: var(--card-bg); padding: 3rem 1rem;
            text-align: center; border-radius: 0 0 40px 40px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.06);
            margin-top: -40px; position: relative; z-index: 10;
        }
        .countdown-section h2 { font-size: clamp(2.5rem, 10vw, 3.5rem); margin-bottom: 2.5rem; }
        #countdown, #countdown-lock { display: flex; justify-content: center; flex-wrap: wrap; gap: 1rem; }
        .time-box {
            background: linear-gradient(145deg, var(--secondary-color), var(--primary-color));
            color: white; padding: 1rem; border-radius: 15px; min-width: 90px;
            box-shadow: 0 8px 20px rgba(136, 19, 55, 0.4); transition: transform 0.3s ease;
        }
        .time-box:hover { transform: translateY(-5px); }
        .time-box span { display: block; font-size: 2rem; font-weight: 600; font-family: var(--body-font); }
        .time-box p { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; }

        /* --- Story Section --- */
        .story-section { padding: 4rem 0 2rem 0; }
        .story-card, .hanan-card {
            background: var(--card-bg); padding: 2rem;
            border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.06);
            margin-bottom: 3rem; text-align: center;
        }
        .story-card h3, .hanan-card h3 { font-size: clamp(2rem, 8vw, 3rem); margin-bottom: 1.5rem; }
        .story-card img, .hanan-card img {
            width: 150px; height: 150px; border-radius: 50%; object-fit: cover;
            margin-bottom: 1.5rem; border: 6px solid var(--secondary-color);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .icon { color: var(--secondary-color); margin: 0 0.5rem; }

        /* --- Timeline Section --- */
        .timeline-section { padding: 2rem 0; text-align: center; }
        .timeline-section h2 { font-size: clamp(2.5rem, 10vw, 3.5rem); margin-bottom: 3rem; }
        .timeline-container { position: relative; max-width: 800px; margin: 0 auto; }
        .timeline-container::after {
            content: ''; position: absolute; width: 4px; background-color: var(--secondary-color);
            top: 0; bottom: 0; left: 50%; margin-left: -2px;
        }
        .timeline-item { padding: 10px 40px; position: relative; background-color: inherit; width: 50%; }
        .timeline-item.left { left: 0; }
        .timeline-item.right { left: 50%; }
        .timeline-item::after {
            content: ''; position: absolute; width: 20px; height: 20px;
            right: -10px; background-color: white; border: 4px solid var(--primary-color);
            top: 25px; border-radius: 50%; z-index: 1;
        }
        .timeline-item.right::after { left: -10px; }
        .timeline-content { padding: 20px; background-color: var(--card-bg); position: relative; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.07); }
        .timeline-content h3 { font-size: 1.5rem; margin-bottom: 0.5rem; }
        @media screen and (max-width: 768px) {
            .timeline-container::after { left: 20px; }
            .timeline-item { width: 100%; padding-left: 60px; padding-right: 15px; }
            .timeline-item.left, .timeline-item.right { left: 0%; }
            .timeline-item::after, .timeline-item.right::after { left: 10px; }
        }

        /* --- Gallery Section with Flip Animation --- */
        .gallery-section { padding: 4rem 0; text-align: center; }
        .gallery-section h2 { font-size: clamp(2.5rem, 10vw, 3.5rem); margin-bottom: 2.5rem; }
        .gallery-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; }
        .gallery-item {
            background-color: transparent; aspect-ratio: 4 / 3;
            perspective: 1000px;
        }
        .gallery-item-inner {
            position: relative; width: 100%; height: 100%;
            transition: transform 0.8s; transform-style: preserve-3d;
        }
        .gallery-item:hover .gallery-item-inner { transform: rotateY(180deg); }
        .gallery-front, .gallery-back {
            position: absolute; width: 100%; height: 100%;
            -webkit-backface-visibility: hidden; backface-visibility: hidden;
            border-radius: 20px; overflow: hidden;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        .gallery-front img { width: 100%; height: 100%; object-fit: cover; }
        .gallery-back {
            background-color: var(--primary-color); color: white;
            transform: rotateY(180deg);
            display: flex; justify-content: center; align-items: center;
            padding: 20px; text-align: center; font-size: 1.1rem;
        }

        /* --- Surprise Section & Modals --- */
        .surprise-section { text-align: center; padding: 2rem 0 4rem 0; }
        .surprise-btn {
            background: linear-gradient(145deg, var(--secondary-color), var(--primary-color));
            color: white; font-size: 1.1rem; font-weight: 600;
            padding: 1rem 2.5rem; border: none; border-radius: 50px;
            cursor: pointer; transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(136, 19, 55, 0.4);
            margin: 0.5rem; display: block; width: 80%; max-width: 350px;
            margin-left: auto; margin-right: auto;
        }
        .surprise-btn:hover { transform: translateY(-5px); box-shadow: 0 12px 25px rgba(136, 19, 55, 0.6); }
        .modal {
            display: none; position: fixed; z-index: 10000;
            left: 0; top: 0;
            width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.75);
            align-items: center; justify-content: center; padding: 1rem;
        }
        .modal-content {
            background-color: var(--background-color); margin: auto; padding: 1.5rem;
            border-radius: 20px; width: 95%; max-width: 550px; text-align: center;
            position: relative; animation: zoomIn 0.5s ease;
        }
        #letterContent { padding: 1rem; max-height: 60vh; overflow-y: auto; text-align: left; }
        .close-btn {
            color: #aaa; position: absolute; top: 10px; right: 20px;
            font-size: 32px; font-weight: bold; cursor: pointer;
        }
        .modal-content h3 { font-size: clamp(2rem, 8vw, 2.8rem); margin-bottom: 1rem; }
        #heart-icon, #hanan-icon { color: var(--primary-color); font-size: 4rem; animation: heartBeat 1.3s infinite; }
        .modal-buttons { display: flex; justify-content: center; gap: 1rem; margin-top: 1.5rem; }
        #date-input { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--secondary-color); margin-top: 1rem; font-size: 1rem; text-align: center; }
        #error-message { color: var(--primary-color); margin-top: 0.5rem; height: 1.2rem; font-weight: 600; }
        .modal.shake .modal-content { animation: shake 0.5s; }

        @keyframes zoomIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        footer {
            text-align: center; padding: 2rem 1rem;
            background-color: #fce7f3; color: var(--primary-color);
        }
    </style>
</head>
<body>

    <!-- Intro Screen -->
    <div id="preloader">
        <div class="preloader-content">
            <h1>Hi, Sayang</h1>
            <button id="enter-btn"><i class="fas fa-gift"></i> Klik Disini</button>
        </div>
    </div>
    
    <!-- Time-Lock Screen -->
    <div id="time-lock-screen" style="display: none;">
        <h2>Hadiahmu sedang disiapkan...</h2>
        <p style="margin-top: 1rem; font-size: 1.1rem;">Akan terbuka dalam:</p>
        <div id="countdown-lock" style="margin: 2rem 0;"></div>
        <button id="peek-btn">Intip Hadiahnya <i class="fas fa-eye"></i></button>
    </div>


    <!-- Main Page Content -->
    <div id="main-content">
        <div class="heart-container" id="heart-container"></div>
        <header class="hero">
            <div class="hero-content">
                <h1>Happy 3rd Anniversary</h1>
                <h2>Ardi <i class="fas fa-heart" style="font-size: clamp(1.5rem, 5vw, 2rem); color: var(--secondary-color);"></i> Elisa</h2>
                <p>22 Juli 2022 - Selamanya</p>
            </div>
        </header>
        <main>
            <section class="countdown-section reveal">
                <div class="container">
                    <h2>Hari Ini Adalah Hari Spesial Kita!</h2>
                    <div id="countdown"></div>
                </div>
            </section>
            <section class="story-section">
                <div class="container">
                    <div class="story-card reveal">
                        <img src="/img/elisa.jpg" alt="Foto Elisa">
                        <h3>Untuk Istriku Tercinta, Elisa</h3>
                        <p>Sayang, tiga tahun yang penuh warna telah kita lewati. Kamu hebat banget bisa bertahan sama aku dan sekarang ditambah sama 'bos kecil' kita, Hanan. Setiap detik bersamamu adalah pelajaran tentang cinta dan kesabaran... terutama kesabaran. Terima kasih telah menjadi partner 'jajan seblak' terbaik dan ibu paling super. Aku tidak bisa membayangkan hidupku tanpamu. Mari kita terus membangun 'kerajaan' kecil kita ini sampai Jannah-Nya.</p>
                        <p style="margin-top: 1.5rem; font-weight: 600;">Dengan segenap cinta,<br/>Suamimu, Ardi</p>
                    </div>
                </div>
            </section>
            <section class="timeline-section">
                 <div class="container">
                    <h2 class="reveal">Kisah Kita Dimulai...</h2>
                    <div class="timeline-container">
                        <div class="timeline-item left reveal">
                            <div class="timeline-content">
                                <h3>Awal Bersama</h3>
                                <p>15 Oktober 2015. Hari di mana takdir menyatukan kita dan perjalanan cinta ini dimulai.</p>
                            </div>
                        </div>
                        <div class="timeline-item right reveal">
                            <div class="timeline-content">
                                <h3>Tunangan</h3>
                                <p>15 Juli 2021. Kita mengambil langkah lebih serius untuk membangun masa depan bersama.</p>
                            </div>
                        </div>
                        <div class="timeline-item left reveal">
                            <div class="timeline-content">
                                <h3>Menikah</h3>
                                <p>22 Juli 2022. Kita mengikat janji suci. Hari paling bersejarah dalam hidupku.</p>
                            </div>
                        </div>
                        <div class="timeline-item right reveal">
                            <div class="timeline-content">
                                <h3>Hanan Lahir</h3>
                                <p>4 Mei 2023. Anugerah terindah kita hadir, cinta kita menjadi semakin sempurna.</p>
                            </div>
                        </div>
                         <div class="timeline-item left reveal">
                            <div class="timeline-content">
                                <h3>Hari Ini</h3>
                                <p>Cintaku padamu semakin kuat setiap harinya. Dan ini baru permulaan dari selamanya kita.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
             <section class="story-section" style="padding-top:0;">
                <div class="container">
                     <div class="hanan-card reveal">
                        <img src="/img/hanan.jpg" alt="Foto Hanan">
                        <h3>Buah Hati Kita <i class="fas fa-star icon"></i> Hanan</h3>
                        <p>Kehadiran Hanan Adhya Wijaya (Lahir 4 Mei 2023) menjadikan keluarga kecil kita semakin ramai dan 'teratur' (sesuai aturan dia, tentunya). Tawa dan tangisnya adalah soundtrack resmi rumah kita. Di usianya yang ke-2 tahun, dia adalah bos kecil, sumber kebahagiaan, sekaligus alarm alami kita yang tak ternilai.</p>
                    </div>
                </div>
            </section>
            <section class="gallery-section">
                <div class="container">
                    <h2 class="reveal">Album Kenangan Manis</h2>
                    <div class="gallery-grid">
                        <div class="gallery-item reveal"><div class="gallery-item-inner"><div class="gallery-front"><img src="/img/ken1.jpg" alt="Kenangan 1"></div><div class="gallery-back"><p>Setiap momen bersamamu adalah favoritku.</p></div></div></div>
                        <div class="gallery-item reveal"><div class="gallery-item-inner"><div class="gallery-front"><img src="/img/ken2.jpg" alt="Kenangan 2"></div><div class="gallery-back"><p>Kenangan indah yang terukir selamanya.</p></div></div></div>
                        <div class="gallery-item reveal"><div class="gallery-item-inner"><div class="gallery-front"><img src="/img/ken3.jpg" alt="Kenangan 3"></div><div class="gallery-back"><p>Tertawa bersamamu adalah bahagiaku.</p></div></div></div>
                        <div class="gallery-item reveal"><div class="gallery-item-inner"><div class="gallery-front"><img src="/img/ken4.jpg" alt="Kenangan 4"></div><div class="gallery-back"><p>Cinta yang akan terus bertumbuh setiap hari.</p></div></div></div>
                        <div class="gallery-item reveal"><div class="gallery-item-inner"><div class="gallery-front"><img src="/img/ken5.jpg" alt="Kenangan 5"></div><div class="gallery-back"><p>Kamu adalah mimpiku yang menjadi nyata.</p></div></div></div>
                        <div class="gallery-item reveal"><div class="gallery-item-inner"><div class="gallery-front"><img src="/img/ken6.jpg" alt="Kenangan 6"></div><div class="gallery-back"><p>Terima kasih untuk semua tawa dan cinta.</p></div></div></div>
                    </div>
                </div>
            </section>
            <section class="surprise-section">
                <div class="container reveal">
                     <button id="letterBtn" class="surprise-btn"><i class="fas fa-envelope-open-text"></i> Buka Surat Cinta</button>
                     <button id="hananBtn" class="surprise-btn"><i class="fas fa-child"></i> Pesan dari Jagoan Kecil</button>
                     <button id="surpriseBtn" class="surprise-btn"><i class="fas fa-gift"></i> Klik Kejutan Terakhir!</button>
                </div>
            </section>
        </main>
        <footer>
            <p>Ardi <i class="fas fa-heart"></i> Elisa <i class="fas fa-heart"></i> Hanan</p>
            <p>Est. 2022</p>
        </footer>
    </div>

    <!-- General Modals -->
    <div id="surpriseModal" class="modal"><div class="modal-content"><span class="close-btn" data-modal="surpriseModal">&times;</span><div id="heart-icon"><i class="fas fa-heart"></i></div><h3>I Love You Forever</h3><p>Kamu adalah anugerah terindah, Elisa. Happy Anniversary!</p></div></div>
    <div id="letterModal" class="modal"><div class="modal-content"><span class="close-btn" data-modal="letterModal">&times;</span><h3>Surat Cinta Untukmu...</h3><div id="letterContent"><p>Elisa sayang,</p><p>Cinta kita ini tidak instan seperti mi, tidak juga dadakan seperti tahu bulat yang digoreng lima ratusan... enaaak. Tapi cinta kita ini adalah proses panjang yang penuh lika-liku, kadang bikin pusing, tapi selalu bikin rindu.</p><p>Jika aku bisa kembali ke masa lalu, aku akan tetap memilih jalan yang sama, jalan yang membawaku ke kamu (mungkin sambil bawa martabak coklat kacang pisang kesukaanmu biar perjalanannya lebih asyik).</p><p>Melihatmu menjadi seorang ibu adalah hal terkeren yang pernah kusaksikan. Caramu merawat Hanan, caramu tetap sabar menghadapi aku yang kadang lebih rewel dari Hanan, dan caramu mengelola 'kerajaan' kita, semuanya membuatku makin cinta.</p><p>Mungkin aku tidak selalu bisa mengucapkan kata-kata manis ala pujangga, tapi percayalah, di dalam hati ini, namamu dan Hanan adalah password wifi-nya. Kalian adalah alasan aku semangat bekerja (demi cicilan, paket internet, skincaremu (kadang) dan mainan Hanan), alasan aku ingin selalu pulang, dan alasan hidupku terasa lengkap.</p><p>Terima kasih untuk segalanya, sayang. Aku berjanji akan selalu berusaha menjadi suami dan ayah terbaik, walau kadang suka lupa naruh handuk dan engga langsung datang saat dipanggil.</p><p>Selamat ulang tahun pernikahan yang ke-3, partner hidupku.</p><br/><p>Dari yang selalu mencintaimu,</p><p><strong>Ardi</strong></p></div></div></div>
    <div id="hananModal" class="modal"><div class="modal-content"><span class="close-btn" data-modal="hananModal">&times;</span><h3>Pesan dari Bos Kecil</h3><p>"Mmi... Abbi... Selamat hari jadi! Hanan sayang kalian berdua. Nanti kita beli es krim sama minum cucu ya? Ya? Ya?"</p></div></div>

    <!-- Modals for Peeking -->
    <div id="confirm-peek-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" data-modal="confirm-peek-modal">&times;</span>
            <h3>Yakin mau ngintip?</h3>
            <p>Nanti engga surprise loh...</p>
            <div class="modal-buttons">
                <button id="confirm-peek-yes" class="surprise-btn" style="width: auto; margin-top: 0;">Iya, Yakin</button>
                <button id="confirm-peek-no" class="surprise-btn" style="width: auto; margin-top: 0; background: #9ca3af;">Tidak, Mau Sabar</button>
            </div>
        </div>
    </div>
    <div id="password-modal" class="modal">
        <div class="modal-content">
             <span class="close-btn" data-modal="password-modal">&times;</span>
             <h3>Kunci Rahasia</h3>
             <p>Masukkan tanggal anniversary kita (DDMMYYYY)</p>
             <input type="text" id="date-input" placeholder="contoh: 01012025" inputmode="numeric">
             <div id="error-message"></div>
             <button id="submit-password" class="surprise-btn" style="width: auto; margin-top: 1rem;">Buka Hadiah</button>
        </div>
    </div>

    <!-- Background Music -->
    <audio id="background-music" loop><source src="/perfect.mp3" type="audio/mpeg">Browser Anda tidak mendukung elemen audio.</audio>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const preloader = document.getElementById('preloader');
            const mainContent = document.getElementById('main-content');
            const enterBtn = document.getElementById('enter-btn');
            const music = document.getElementById('background-music');
            const timeLockScreen = document.getElementById('time-lock-screen');
            const peekBtn = document.getElementById('peek-btn');
            
            const confirmPeekModal = document.getElementById('confirm-peek-modal');
            const passwordModal = document.getElementById('password-modal');
            const confirmPeekYesBtn = document.getElementById('confirm-peek-yes');
            const confirmPeekNoBtn = document.getElementById('confirm-peek-no');
            const submitPasswordBtn = document.getElementById('submit-password');
            const dateInput = document.getElementById('date-input');
            const errorMessage = document.getElementById('error-message');

            const anniversaryDate = new Date("Jul 22, 2025 00:00:00").getTime();
            let countdownFunction;

            function showMainContent() {
                if(timeLockScreen) timeLockScreen.classList.add('hidden');
                if(mainContent) mainContent.classList.add('visible');
                if (countdownFunction) clearInterval(countdownFunction);
                
                const finalCountdownEl = document.getElementById("countdown");
                if(finalCountdownEl) {
                    finalCountdownEl.innerHTML = `
                    <div class="time-box"><span>00</span><p>Hari</p></div>
                    <div class="time-box"><span>00</span><p>Jam</p></div>
                    <div class="time-box"><span>00</span><p>Menit</p></div>
                    <div class="time-box"><span>00</span><p>Detik</p></div>`;
                }
                setTimeout(reveal, 100);
            }

            if (enterBtn) {
                enterBtn.addEventListener('click', () => {
                    preloader.classList.add('loaded');
                    music.play().catch(error => console.log("Autoplay dicegah oleh browser."));
                    
                    const now = new Date().getTime();
                    // Untuk testing, baris di bawah ini diaktifkan
                    if (true) { 
                    // if (anniversaryDate > now) { // Ganti ke baris ini saat sudah siap
                        timeLockScreen.style.display = 'flex';
                        startCountdown();
                    } else {
                        showMainContent();
                    }
                });
            }
            
            if (peekBtn) {
                peekBtn.addEventListener('click', () => {
                    if(confirmPeekModal) confirmPeekModal.style.display = 'flex';
                });
            }

            if(confirmPeekYesBtn) {
                confirmPeekYesBtn.addEventListener('click', () => {
                    if(confirmPeekModal) confirmPeekModal.style.display = 'none';
                    if(passwordModal) passwordModal.style.display = 'flex';
                });
            }

            if(confirmPeekNoBtn) {
                confirmPeekNoBtn.addEventListener('click', () => {
                    if(confirmPeekModal) confirmPeekModal.style.display = 'none';
                });
            }
            
            if(submitPasswordBtn) {
                submitPasswordBtn.addEventListener('click', () => {
                    if(dateInput.value === '22072025') {
                        if(passwordModal) passwordModal.style.display = 'none';
                        showMainContent();
                    } else {
                        errorMessage.textContent = 'Ingat-ingat lagi tanggalnya';
                        if(passwordModal) {
                            passwordModal.classList.add('shake');
                            setTimeout(() => passwordModal.classList.remove('shake'), 500);
                        }
                        dateInput.value = '';
                    }
                });
            }
            
            if(dateInput) {
                dateInput.addEventListener('keyup', function(event) {
                    if (event.key === "Enter") {
                       event.preventDefault();
                       if(submitPasswordBtn) submitPasswordBtn.click();
                    }
                });
            }

            function startCountdown() {
                const countdownLockEl = document.getElementById("countdown-lock");
                countdownFunction = setInterval(() => {
                    const now = new Date().getTime();
                    const distance = anniversaryDate - now;

                    if (distance < 0) {
                        showMainContent();
                        return;
                    }

                    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                    if (countdownLockEl) {
                        countdownLockEl.innerHTML = `
                        <div class="time-box"><span>${String(days).padStart(2, '0')}</span><p>Hari</p></div>
                        <div class="time-box"><span>${String(hours).padStart(2, '0')}</span><p>Jam</p></div>
                        <div class="time-box"><span>${String(minutes).padStart(2, '0')}</span><p>Menit</p></div>
                        <div class="time-box"><span>${String(seconds).padStart(2, '0')}</span><p>Detik</p></div>`;
                    }
                }, 1000);
            }

            const heartContainer = document.getElementById('heart-container');
            if(heartContainer){
                const heartCount = window.innerWidth < 768 ? 20 : 35;
                for (let i = 0; i < heartCount; i++) {
                    const heart = document.createElement('div');
                    heart.classList.add('heart');
                    heart.innerHTML = '<i class="fas fa-heart"></i>';
                    heart.style.left = Math.random() * 100 + 'vw';
                    heart.style.animationDuration = Math.random() * 3 + 4 + 's';
                    heart.style.animationDelay = Math.random() * 3 + 's';
                    heart.style.fontSize = Math.random() * 1 + 0.5 + 'rem';
                    heartContainer.appendChild(heart);
                }
            }

            const surpriseModal = document.getElementById("surpriseModal");
            const letterModal = document.getElementById("letterModal");
            const hananModal = document.getElementById("hananModal");
            const surpriseBtn = document.getElementById("surpriseBtn");
            const letterBtn = document.getElementById("letterBtn");
            const hananBtn = document.getElementById("hananBtn");
            const closeBtns = document.querySelectorAll(".close-btn");

            if(surpriseBtn) { surpriseBtn.onclick = () => { surpriseModal.style.display = "flex"; } }
            if(letterBtn) { letterBtn.onclick = () => { letterModal.style.display = "flex"; } }
            if(hananBtn) { hananBtn.onclick = () => { hananModal.style.display = "flex"; } }
            
            closeBtns.forEach(btn => {
                btn.onclick = () => {
                    const modalId = btn.getAttribute('data-modal');
                    if(document.getElementById(modalId)) {
                       document.getElementById(modalId).style.display = "none";
                    }
                }
            });
            
            function reveal() {
                var reveals = document.querySelectorAll(".reveal");
                for (var i = 0; i < reveals.length; i++) {
                    var windowHeight = window.innerHeight;
                    var elementTop = reveals[i].getBoundingClientRect().top;
                    if (elementTop < windowHeight - 80) {
                        reveals[i].classList.add("active");
                    }
                }
            }
            window.addEventListener("scroll", reveal);
        });
    </script>
</body>
</html>
